# 配置管理UI功能验证指南

## 访问配置管理页面

1. 启动前端服务：`cd frontend && npm run dev`
2. 启动后端服务：`cd backend && python app.py`
3. 在浏览器中访问：`http://localhost:3001/config-management`

## 功能验证清单

### 1. 页面加载 ✓
- [ ] 页面正常加载，无错误
- [ ] 左侧导航菜单显示7个配置项
- [ ] 右侧显示当前选中的配置编辑器
- [ ] 底部显示实时预览区域
- [ ] 侧边栏底部显示"版本历史"按钮

### 2. 配置编辑器功能

#### 2.1 删除无关关键词（ignore_keywords）
- [ ] 显示当前关键词列表
- [ ] 可以添加新关键词
- [ ] 可以删除现有关键词
- [ ] 显示关键词数量统计

#### 2.2 处理分隔符（feature_split_chars）
- [ ] 显示当前分隔符列表
- [ ] 显示字符和Unicode编码
- [ ] 可以添加新分隔符
- [ ] 可以删除现有分隔符

#### 2.3 同义词映射（synonym_map）
- [ ] 以表格形式显示映射关系
- [ ] 可以添加新映射（原词 → 目标词）
- [ ] 可以删除现有映射
- [ ] 显示映射数量统计

#### 2.4 归一化映射（normalization_map）
- [ ] 以表格形式显示映射关系
- [ ] 可以添加新映射
- [ ] 空目标显示为"(删除)"
- [ ] 可以删除现有映射

#### 2.5 全局配置（global_config）
- [ ] 显示匹配阈值输入框和滑块
- [ ] 显示布尔开关（统一小写、删除空格等）
- [ ] 修改数值时输入框和滑块同步
- [ ] 切换开关正常工作

#### 2.6 品牌关键词（brand_keywords）
- [ ] 以标签云形式显示
- [ ] 可以添加新品牌
- [ ] 可以删除现有品牌
- [ ] 显示品牌数量统计

#### 2.7 设备类型（device_type_keywords）
- [ ] 以标签云形式显示
- [ ] 可以添加新类型
- [ ] 可以删除现有类型
- [ ] 显示类型数量统计

### 3. 实时预览功能 ✓
- [ ] 输入测试文本后显示预处理结果
- [ ] 显示原始文本、清理后、归一化、提取特征
- [ ] 显示匹配结果（状态、设备、得分）
- [ ] 防抖处理正常（500ms延迟）

### 4. 配置保存功能 ✓
- [ ] 修改配置后"保存"按钮变为可用
- [ ] 点击保存提示输入备注
- [ ] 保存成功后显示成功提示
- [ ] 保存后"保存"按钮变为禁用

### 5. 版本历史功能 ✓
- [ ] 点击"版本历史"按钮打开弹窗
- [ ] 显示历史版本列表（版本号、时间、备注）
- [ ] 可以回滚到历史版本
- [ ] 回滚后自动刷新配置

### 6. 导入导出功能 ✓
- [ ] 点击"导出"按钮下载JSON文件
- [ ] 点击"导入"按钮选择文件
- [ ] 导入成功后显示成功提示
- [ ] 导入后自动刷新配置

### 7. 重置功能 ✓
- [ ] 点击"重置"按钮显示确认对话框
- [ ] 确认后恢复到最后保存的状态
- [ ] 未保存的修改被丢弃

## 常见问题排查

### 问题1: 页面无法加载
**解决方案**:
- 检查前端服务是否启动：`http://localhost:3001`
- 检查后端服务是否启动：`http://localhost:5000`
- 检查浏览器控制台是否有错误

### 问题2: 实时预览不工作
**解决方案**:
- 检查后端API `/api/config/test` 是否正常
- 检查浏览器网络面板是否有请求失败
- 确认输入的测试文本不为空

### 问题3: 配置保存失败
**解决方案**:
- 检查后端API `/api/config/save` 是否正常
- 检查配置验证是否通过
- 查看后端日志了解详细错误

### 问题4: 版本历史为空
**解决方案**:
- 确认数据库中有 `config_history` 表
- 运行 `python add_config_history_table.py` 创建表
- 保存一次配置后再查看历史

## 性能验证

### 响应时间要求
- 配置加载: < 1秒
- 配置保存: < 2秒
- 实时预览: < 500ms（防抖后）
- 版本历史加载: < 1秒

### 测试方法
1. 打开浏览器开发者工具
2. 切换到Network面板
3. 执行各项操作
4. 查看请求响应时间

## 测试数据

### 测试文本示例
```
霍尼韦尔温度传感器
西门子DDC控制器
江森自控压力传感器
施耐德电动阀门
```

### 预期结果
- 应该能识别品牌（霍尼韦尔、西门子等）
- 应该能识别设备类型（传感器、控制器等）
- 应该能正确匹配到数据库中的设备

## 验证完成标准

所有功能验证清单项都打勾 ✓，且：
- 无JavaScript错误
- 无API请求失败
- 用户体验流畅
- 响应时间符合要求
