# 数据库前端界面快速开始指南

## 访问新界面

启动前端开发服务器后，可以通过以下URL访问新实现的界面：

### 1. 设备库管理
```
http://localhost:5173/database/devices
```

**功能**：
- 查看、搜索、筛选设备列表
- 添加、编辑、删除设备
- 批量导入设备（Excel）
- 数据一致性检查

### 2. 统计仪表板
```
http://localhost:5173/database/statistics
```

**功能**：
- 查看设备和规则统计概览
- 品牌分布图表
- 价格分布图表
- 最近添加的设备
- 无规则设备列表

## 启动步骤

### 1. 确保后端服务运行

```bash
cd backend
python app.py
```

后端应该运行在 `http://localhost:5000`

### 2. 启动前端开发服务器

```bash
cd frontend
npm run dev
```

前端应该运行在 `http://localhost:5173`

### 3. 访问界面

在浏览器中打开：
- 设备管理：http://localhost:5173/database/devices
- 统计仪表板：http://localhost:5173/database/statistics

## 功能测试流程

### 设备管理测试

1. **查看设备列表**
   - 访问 `/database/devices`
   - 查看设备列表是否正常显示

2. **搜索设备**
   - 在搜索框输入关键词
   - 点击"搜索"按钮
   - 验证搜索结果

3. **筛选设备**
   - 选择品牌筛选
   - 输入价格范围
   - 验证筛选结果

4. **添加设备**
   - 点击"添加设备"按钮
   - 填写设备信息
   - 勾选"自动生成规则"
   - 点击"创建"
   - 验证设备是否添加成功

5. **查看设备详情**
   - 点击设备列表中的"查看"按钮
   - 查看设备完整信息
   - 查看关联规则

6. **编辑设备**
   - 点击设备列表中的"编辑"按钮
   - 修改设备信息
   - 勾选"重新生成规则"（可选）
   - 点击"保存"
   - 验证设备是否更新成功

7. **删除设备**
   - 点击设备列表中的"删除"按钮
   - 确认删除操作
   - 验证设备是否删除成功

8. **批量导入**
   - 点击"批量导入"按钮
   - 上传Excel文件
   - 预览数据
   - 确认导入
   - 查看导入结果

9. **数据一致性检查**
   - 点击"数据一致性检查"按钮
   - 查看检查报告
   - 如有问题，执行修复操作

### 统计仪表板测试

1. **查看概览卡片**
   - 访问 `/database/statistics`
   - 查看设备总数、规则总数、品牌数量、规则覆盖率

2. **查看品牌分布图**
   - 查看品牌分布柱状图
   - 点击柱状图（应跳转到设备管理页面并筛选该品牌）

3. **查看价格分布图**
   - 查看价格分布直方图
   - 点击区间（应跳转到设备管理页面并筛选该价格范围）

4. **查看最近设备**
   - 查看最近添加的10个设备
   - 点击"查看详情"

5. **查看无规则设备**
   - 查看没有规则的设备列表
   - 点击"批量生成规则"
   - 验证规则是否生成成功

## API 端点验证

如果前端界面无法正常工作，可以先验证后端API是否正常：

### 1. 获取设备列表
```bash
curl http://localhost:5000/api/devices
```

### 2. 获取统计数据
```bash
curl http://localhost:5000/api/database/statistics
```

### 3. 获取品牌分布
```bash
curl http://localhost:5000/api/database/statistics/brands
```

### 4. 获取价格分布
```bash
curl http://localhost:5000/api/database/statistics/prices
```

### 5. 数据一致性检查
```bash
curl http://localhost:5000/api/database/consistency-check
```

## 常见问题

### 1. 页面显示空白

**可能原因**：
- 后端服务未启动
- API 端点不存在
- CORS 配置问题

**解决方法**：
- 检查后端服务是否运行
- 检查浏览器控制台错误信息
- 验证 API 端点是否正确

### 2. 图表不显示

**可能原因**：
- ECharts 未正确加载
- 数据格式不正确
- 容器尺寸为0

**解决方法**：
- 检查浏览器控制台错误
- 验证 API 返回的数据格式
- 检查图表容器的 CSS 样式

### 3. 文件上传失败

**可能原因**：
- 文件格式不支持
- 文件大小超限
- 后端未正确处理 multipart/form-data

**解决方法**：
- 检查文件格式（.xlsx, .xls）
- 检查文件大小（< 10MB）
- 检查后端日志

### 4. 搜索/筛选不工作

**可能原因**：
- API 参数不正确
- 后端未实现筛选逻辑

**解决方法**：
- 检查网络请求的参数
- 验证后端 API 是否支持筛选参数

## 开发调试

### 1. 启用 Vue DevTools

安装 Vue DevTools 浏览器扩展，可以查看组件状态和事件。

### 2. 查看网络请求

打开浏览器开发者工具的 Network 标签，查看 API 请求和响应。

### 3. 查看控制台日志

所有错误都会输出到浏览器控制台，便于调试。

### 4. 修改代码后自动刷新

Vite 支持热模块替换（HMR），修改代码后会自动刷新页面。

## 下一步

1. **添加导航菜单**：在主导航中添加"设备库管理"和"统计仪表板"的链接
2. **完善错误处理**：根据实际 API 响应调整错误处理逻辑
3. **优化用户体验**：根据用户反馈调整界面和交互
4. **添加单元测试**：为关键组件添加单元测试
5. **性能优化**：根据实际数据量优化列表渲染和图表性能

## 联系支持

如有问题，请查看：
- 实现文档：`frontend/docs/DATABASE_FRONTEND_IMPLEMENTATION.md`
- 设计文档：`.kiro/specs/database-migration/design.md`
- 任务列表：`.kiro/specs/database-migration/tasks.md`
